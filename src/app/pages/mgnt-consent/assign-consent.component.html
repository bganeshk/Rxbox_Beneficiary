<p-toast></p-toast>
<p-card>
    <p-fieldset >
        <p-header class="tblH1Lbl">Assign Consent - Grant Health record access</p-header>
        <div class="ui-g">
            <div class="ui-g-6">
                <span class="ui-fluid">
                    <label class="tblHLbl" for="assig">Assignee(s) </label>
                    <p-autoComplete [(ngModel)]="newConst.cosnt_assignee" [suggestions]="filteredAssigneeMultiple" 
                        (completeMethod)="filterAssigneMultiple($event)"  id='assig'
                maxlength="5" 
                        [minLength]="1" placeholder="Select Assignee " field="name" [multiple]="true">
                    </p-autoComplete>                    
                </span>
            </div>
            <div class="ui-g-6">
               
                <label class="tblHLbl" for="contype">Consent Type</label><br/>
                <p-multiSelect id="contype" [options]="cosnt_type"></p-multiSelect>
               
            </div>
            
            <div class="ui-g-6">
               
                <label class="tblHLbl" for="concattype">Consent Category</label><br/>
                <p-multiSelect id="concattype" [options]="cosnt_cat_type"></p-multiSelect>
               
            </div>
            <div class="ui-g-6">
               
                <label class="tblHLbl" for="contag">Consent Tag(s)</label><br/>
                <p-chips id="contag" [(ngModel)]="cosnt_tag" separator=","></p-chips>
               
            </div>
            <div class="ui-g-6">
                <span class="ui-fluid">
                    <label for="cnstempl" class="tblHLbl">Consent Template *</label>
                    <p-autoComplete [(ngModel)]="newConst.cosnt_assignee" [suggestions]="filteredTemplate" 
                        (completeMethod)="filterTemplate($event)"  id='assig'
                        [minLength]="1" placeholder="Select Template" field="name" [multiple]="false">
                    </p-autoComplete>                    
                </span>
               
            </div>
            <div class="ui-g-6">
                <span>
                    <label class="tblLbl"  for="cnst-validity">Expire After *</label><br/>
                    <input id="cnst-validity" style="padding-bottom: 0px;
                    padding-top: 12px;" type="text" size="3"   pInputText />
                <p-dropdown [options]="valididty_unty" ></p-dropdown>
            </span>   
            </div>
        </div>
        <div class="ui-g-6">
            <label for="cnst-rem" class="tblLbl" > Consent Note</label><br/>
                
             <textarea id="cnst-rem" pInputTextarea [(ngModel)]="newConst.remarks" style="width: 100%;"></textarea>
            
        
        </div>
        <div class="ui-g-12">
            <label for="cnst-rem" class="tblLbl" > Direct Share</label><br/>
            <p class="ghint">Enter emailId(Email) or phone number(SMS), Valid for 7days </p>
            <div class="ui-inputgroup">
                <p-chips [(ngModel)]="cosnt_tag" separator="," ></p-chips>                
                <button pButton type="button" icon="pi pi-share-alt" class="ui-button-secondary ui-button-raised" style="margin-right:10px;"
                (click)="saveAssignment($event)" 
                label="Share"></button>                
            </div>
        </div>
        <div class="ui-g-12" >
            <div class="p-grid p-justify-end">
            <button pButton type="button" icon="pi pi-save" class="ui-button-secondary ui-button-raised" style="margin-right:10px;"
                (click)="saveAssignment($event)" 
                label="Assign">
            </button>
           
            <button  pButton type="button" class="ui-button-secondary ui-button-raised"
            icon="pi pi-times" (click)="cancelAssing()"
            label="Clear"></button>
            </div>
        </div>
    </p-fieldset>
</p-card>
<p-toast position="center" key="c" (onClose)="cancelAssing()" [modal]="true" [baseZIndex]="5000">
    <ng-template let-message pTemplate="message">
        <div style="text-align: center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3em"></i>
            <h3>{{message.summary}}</h3>
            

                <input type="text" [(ngModel)]="phoneOTP" [ngModelOptions]="{standalone: true}" size=15> &nbsp;
                
            
            <p>{{message.detail}}</p>
        </div>
        <div class="p-grid ui-fluid">
            <div class="p-col-6">
                <button pButton type="button" icon="pi pi-save" class="ui-button-secondary ui-button-raised" style="margin-right:10px;"
            (click)="verifyOTP()" *ngIf="verifyPhoneOTP"
            label="Verify">
        </button>
            </div>
            <div class="p-col-6">
                <button type="button" pButton (click)="sendOTP(true)" label="Resend OTP" class="ui-button-secondary"></button>
            </div>
        </div>
    </ng-template>
</p-toast>

